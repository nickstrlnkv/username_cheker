# Рекомендации по настройкам для избежания FloodWait

## Текущие оптимальные настройки (обновлены)

```python
CHECK_BATCH_SIZE = 30        # Количество username в одном батче
CHECK_INTERVAL = 3            # Секунд между батчами
MAX_CONCURRENT_CHECKS = 5     # Максимум параллельных запросов
CYCLE_DELAY = 15              # Секунд между полными циклами проверки
```

## Объяснение параметров

### MAX_CONCURRENT_CHECKS (самый важный!)
- **Текущее значение:** 5
- **Что делает:** Ограничивает количество одновременных запросов к Telegram API
- **Рекомендации:**
  - **Безопасно:** 3-5 (для стабильной работы без FloodWait)
  - **Умеренно:** 5-10 (баланс скорости и безопасности)
  - **Агрессивно:** 10-20 (быстрее, но риск FloodWait)

### CHECK_INTERVAL
- **Текущее значение:** 3 секунды
- **Что делает:** Пауза между проверкой батчей
- **Рекомендации:** 2-5 секунд

### CHECK_BATCH_SIZE
- **Текущее значение:** 30
- **Что делает:** Сколько username проверяется в одном батче
- **Рекомендации:** 20-50 (меньше = безопаснее)

### CYCLE_DELAY
- **Текущее значение:** 15 секунд
- **Что делает:** Пауза между полными циклами проверки всех username
- **Рекомендации:** 10-30 секунд

## Расчет скорости проверки

С текущими настройками:
- Батч из 30 username проверяется с 5 параллельными запросами
- Время на батч: ~30/5 * 0.2 сек = ~1.2 секунды + задержки
- Между батчами: 3 секунды
- Для 167 username: ~6 батчей * (1.2 + 3) = ~25 секунд на цикл
- Между циклами: 15 секунд
- **Итого:** ~40 секунд на полный цикл для 167 username

## Если все еще получаете FloodWait

### Вариант 1: Консервативный (максимально безопасный)
```python
MAX_CONCURRENT_CHECKS = 3
CHECK_INTERVAL = 5
CHECK_BATCH_SIZE = 20
CYCLE_DELAY = 20
```

### Вариант 2: Умеренный (баланс)
```python
MAX_CONCURRENT_CHECKS = 5
CHECK_INTERVAL = 3
CHECK_BATCH_SIZE = 30
CYCLE_DELAY = 15
```

### Вариант 3: Агрессивный (быстрее, но рискованно)
```python
MAX_CONCURRENT_CHECKS = 10
CHECK_INTERVAL = 2
CHECK_BATCH_SIZE = 50
CYCLE_DELAY = 10
```

## Важные замечания

1. **Telegram API лимиты:**
   - Обычно ~20-30 запросов в секунду на аккаунт
   - При превышении лимита получаете FloodWait (от нескольких секунд до часов)

2. **После FloodWait:**
   - Код автоматически ждет нужное время
   - Мониторинг продолжит работу после ожидания
   - Не нужно перезапускать бота

3. **Мониторинг:**
   - Следите за логами на наличие FloodWait
   - Если FloodWait появляется часто - уменьшите MAX_CONCURRENT_CHECKS

4. **Рекомендация:**
   - Начните с консервативных настроек (MAX_CONCURRENT_CHECKS = 3)
   - Если все работает стабильно неделю - можно постепенно увеличивать
   - Увеличивайте по одному параметру за раз и следите за результатом

## Как изменить настройки

Настройки находятся в файле `config.py`. После изменения:
1. Остановите бота
2. Измените значения в `config.py`
3. Перезапустите бота

Или используйте настройки через бота (если доступны в интерфейсе).


